

test: "%%option(strict=true)

a = 4
#a + 3
#d = 1d
#r = a * d
#a += 3
#r = a * d

s = { a=5 }
#s.a
#a
#s.a * a

s.b = s.a * a

s.b

++s.b

"

tree1:  a = 4
result: None
    1 : BinOp TK.ASSIGN(BINOP, '=', V=None)
    2 :     Ident TK.IDNT(IDENTIFIER, 'a', V=a)
    3 :     Int TK.INT(LITERAL, '4', V=4)

tree2:  s = { a=5 }
result: None
    1 : BinOp TK.ASSIGN(BINOP, '=', V=None)
    2 :     Ident TK.IDNT(IDENTIFIER, 's', V=s)
    3 :     Set TK.SET(SET, '{', V=[BinOp()])
    4 :         BinOp TK.ASSIGN(BINOP, '=', V=None)
    5 :             Ident TK.IDNT(IDENTIFIER, 'a', V=a)
    6 :             Int TK.INT(LITERAL, '5', V=5)

tree3:  s.b = s.a * a
result: None
    1 : BinOp TK.ASSIGN(BINOP, '=', V=None)
    2 :     PropRef TK.REF(BINOP, '.', V=None)
    3 :         Ident TK.IDNT(IDENTIFIER, 's', V=s)
    4 :         Ident TK.IDNT(IDENTIFIER, 'b', V=b)
    5 :     BinOp TK.MUL(BINOP, '*', V=None)
    6 :         PropRef TK.REF(BINOP, '.', V=None)
    7 :             Ident TK.IDNT(IDENTIFIER, 's', V=s)
    8 :             Ident TK.IDNT(IDENTIFIER, 'a', V=a)
    9 :         Ident TK.IDNT(IDENTIFIER, 'a', V=a)

tree4:  s.b
result: None
    1 : PropRef TK.REF(BINOP, '.', V=None)
    2 :     Ident TK.IDNT(IDENTIFIER, 's', V=s)
    3 :     Ident TK.IDNT(IDENTIFIER, 'b', V=b)

tree5:  ++s.b
result: None
    1 : UnaryOp TK.INCREMENT(UNARY, '++', V=None)
    2 :     PropRef TK.REF(BINOP, '.', V=None)
    3 :         Ident TK.IDNT(IDENTIFIER, 's', V=s)
    4 :         Ident TK.IDNT(IDENTIFIER, 'b', V=b)

tree1:  %%option(strict=true)
    1 : Command TK.PCT2(UNARY, '%%', V=None)
    2 :     FnCall TK.FUNCTION(BINOP, '(', V=None)
    3 :         Ident TK.IDNT(IDENTIFIER, 'option', V=option)
    4 :         List TK.TUPLE(LIST, '(', V=[BinOp()])
    5 :             BinOp TK.ASSIGN(BINOP, '=', V=None)
    6 :                 Ident TK.IDNT(IDENTIFIER, 'strict', V=strict)
    7 :                 Bool TK.TRUE(LITERAL, 'true', V=True)
